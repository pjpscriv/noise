<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Attempt 2.5</title>
  <style type="text/css">
    html, body {
      margin: 0px;
      background-color: #000000;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
  </style>
</head>

<body>
  <canvas id='canvas'></canvas>
</body>

<script type="text/javascript">

  async function noise() {
    // let start = Date.now()

    let h = window.innerHeight;
    let w = window.innerWidth;

    let canvas = document.getElementById('canvas');
    canvas.height = h;
    canvas.width = w;
    
    let ctx = canvas.getContext('2d');
    
    for (let y=0; y < h; y+=1) {
      for (let x=0; x < w; x+=1) {
        let color = Math.random().toString(16).slice(-6);
        ctx.fillStyle = '#' + color;
        ctx.fillRect(x, y, 1, 1);
      }

      if (y % 10 == 0) {
        await drawPixels();
      }
    }
    // console.log(`Done in ${Date.now()-start} ms`);
  }
  
  
  function drawPixels() {
    return new Promise(resolve => setTimeout(resolve, 0));
  }
  

  window.onload = noise;
  window.onclick = noise;
  window.ontouchstart = noise;

</script>
</html>